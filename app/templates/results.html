
<!DOCTYPE html>
<meta charset="utf-8">
<link href="../static/nv.d3.css" rel="stylesheet" type="text/css">
<style>

body {
  background: #bbb;
  overflow-y:scroll;
}

text {
  font: 12px sans-serif;
}

.mypiechart {
  width: 500px;
  border: 2px;
}
</style>
<head>
    <meta http-equiv="Content-Type"
      content="text/html; charset=utf-8"/>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"
      type="text/javascript"></script>
    <script src="../static/js/jquery.tagcloud.js"
      type="text/javascript"></script>
    <!-- <script src="custom.js"    
      type="text/javascript"></script> -->
</head>
<body class='with-3d-shadow with-transitions'>
<div style = "float : left">
<h2>Search: "Baltimore"</h2>
<svg id="test1" class="mypiechart"></svg>
</div>
<div id="whatever" style="float: right">
</div>


<!--<h2>Test2</h2>
<svg id="test2" class="mypiechart"></svg>-->

<script src="../static/js/d3.v3.js"></script>
<script src="../static/js/nv.d3.js"></script>
<script src="../static/js/legend.js"></script>
<script src="../static/js/pie.js"></script>
<script src="../static/js/pieChart.js"></script>
<script src="../static/js/utils.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script>

  var testdata = [
    {
      key: "STEM Jobs",
      y: 5
    },
    {
      key: "UMBC",
      y: 2
    },
    {
      key: "Football",
      y: 9
    },
    {
      key: "Inner Harbor",
      y: 7
    },
    {
      key: "Johns Hopkins",
      y: 4
    },
    {
      key: "Basketball",
      y: 3
    },
    {
      key: "Theft",
      y: .5
    }
  ];

nv.addGraph(function() {
    var width = 500,
        height = 500;

    var chart = nv.models.pieChart()
        .x(function(d) { return d.key })
        .y(function(d) { return d.y })
        .color(d3.scale.category10().range())
        .width(width)
        .height(height);

      d3.select("#test1")
          .datum(testdata)
        .transition().duration(1200)
          .attr('width', width)
          .attr('height', height)
          .call(chart);

    chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart;
});

function popitup(url) {
  newwindow=window.open(url,'name','height=200,width=150');
  if (window.focus) {newwindow.focus()}
  return false;
}

var key = new Array();
var index;
var myJSONObject = { "_id": "Baltimore, MD",
    "category": {
    "health": {
      "hospital": {
        "data": {"frequency": 3, "relevance": 0.7845, "sentiment": "Mixed"},
        "metadata": {
          "article1": {"author": "Tom Jones", "title": "Current Rises in Health Insurance Policies in Baltimore", "timestamp": "26-FEB-1987 15:01:01.79"},
          "article2": {"author": "Bob Jenkins", "title": "Obamacare in Hospitals", "timestamp": "06-SEP-2011 16:32:34.73"},
          "article3": {"author": "Tom Jones", "title": "Rises in Hospital Fees", "timestamp": "31-DEC-1991 01:45:59.66"}
        } 
      } 
    },
    "crime": {
      "assault": {
        "data": {"frequency": 12, "relevance": 0.9045, "sentiment": "Negative"},
        "metadata": {
          "article1": {"author": "", "title": "Another shooting in Baltimore", "timestamp": "26-FEB-1987 15:01:01.79"},
          "article2": {"author": "Anderson Silva", "title": "Street Crime up in cities", "timestamp": "06-SEP-2011 16:32:34.73"},
          "article3": {"author": "John Jones", "title": "Rise in assaults in Baltimore", "timestamp": "31-DEC-1991 01:45:59.66"}
        } 
      },
      "robbery": {
        "data": {"frequency": 15, "relevance": 0.553, "sentiment": "Positive"},
        "metadata": {
          "article1": {"author": "Rob", "title": "Robbery of Museum in Baltimore", "timestamp": "26-FEB-1987 15:01:01.79"},
          "article2": {"author": "Anderson Silva", "title": "Man held at gunpoint for wallet", "timestamp": "06-SEP-2011 16:32:34.73"},
          "article3": {"author": "John Jenkins", "title": "Increase in robbery frequency in MD", "timestamp": "31-DEC-1991 01:45:59.66"}
        } 
      }       
    }
  }
}


console.log(myJSONObject._id);

function objLength(obj){
  var i=0;
  for (var x in obj){
    if(obj.hasOwnProperty(x)){
      i++;
    }
  } 
  return i;
}

//alert(objLength(myJSONObject.category.health));

for(var i = 0; i < objLength(myJSONObject); i++)
{
    var product = myJSONObject.category;
    for(var j = 0; j < objLength(myJSONObject.category); j++)
    {
        console.log(myJSONObject.category)
    }
}

$("#whatever").append(jQuery('<a>').attr({'href': 'url', 'rel': 7}).text('bldh'));
key[0] = "Crime";
key[1] = "weather";
key[3] = "health";
for (index = 0; index < key.length; ++index) {
$("#whatever").append(jQuery('<a>').attr({'href': 'url', 'rel': index}).text(key[index]));      
}
//$("#whatever").append(jQuery('<a>').attr({'href': 'url', 'rel': 7}).text('blah'));/

$.fn.tagcloud.defaults = {
  size: {start: 25, end: 35, unit: 'pt'},
  color: {start: '#cde', end: '#f52'}
};

$(function () {
  $('#whatever a').tagcloud();
});

</script>

